function attemptSignin(e,t,i,a,r){$.ajax({method:"POST",url:"index",data:{email:e,password:t,totp:i,url:a,token:r,action:"sign_in_to_dms"},timeout:14e3,beforeSend:function(){$("#signin").attr("disabled",!0),$("#signin").html('<i class="fa-solid fa-spinner fa-spin-pulse fa-xl fa-fw"></i>Signing in...')}}).done((function(e,t,i){let a=JSON.parse(e);if(0===a.res)return $("#msg0").html(a.msg),void showAlertDanger();1===a.res&&($("#form-signin").trigger("reset"),location.href=a.msg)})).fail((function(e,t,i){$("#msg0").html("Error in processing request: "+i+"."),showAlertDanger()})).always((function(){$("#signin").html("Sign in"),$("#signin").attr("disabled",!1)}))}function attemptRecovercredentials(e,t,i){$.ajax({method:"POST",url:"index",data:{"email-recovercredentials":e,key:t,token:i,action:"recover_credentials"},timeout:14e3,beforeSend:function(){$("#submit").attr("disabled",!0),$("#submit").html('<i class="fa-solid fa-spinner fa-spin-pulse fa-xl fa-fw"></i>Submitting...')}}).done((function(e,t,i){let a=JSON.parse(e);if(0===a.res)return $("#msg0").html(a.msg),void showAlertDanger();1===a.res&&($("#form-recovercredentials").trigger("reset"),$("#msg1").html(a.msg),showAlertSuccess())})).fail((function(e,t,i){$("#msg0").html("Error in processing request: "+i+"."),showAlertDanger()})).always((function(){$("#submit").html("Submit"),$("#submit").attr("disabled",!1)}))}function attemptResetpassword(e,t,i,a,r){$.ajax({method:"POST",url:"index",data:{newPass:e,cnfPass:t,t:i,e:a,token:r,action:"reset_password"},timeout:14e3,beforeSend:function(){$("#submit").attr("disabled",!0),$("#submit").html('<i class="fa-solid fa-spinner fa-spin-pulse fa-xl fa-fw"></i>Submitting...')}}).done((function(e,t,i){let a=JSON.parse(e);if(0===a.res)return $("#msg0").html(a.msg),void showAlertDanger();1===a.res&&($("#form-resetpass").trigger("reset"),location.href=a.msg)})).fail((function(e,t,i){$("#msg0").html("Error in processing request: "+i+"."),showAlertDanger()})).always((function(){$("#submit").html("Submit"),$("#submit").attr("disabled",!1)}))}function setTimer(){$.ajax({method:"POST",url:"",data:{timer:1},timeout:14e3}).done((function(e,t,i){if(i.getResponseHeader("content-security-policy"))return void redirect();1===JSON.parse(e).res&&setTimerVal()})).fail((function(e,t,i){$("#msg0").html("Error in processing RESET TIMER request: "+i+"."),showAlertDanger()}))}function setTimerVal(){localStorage.timer=+new Date+parseInt(84e4);let e=setInterval((function(){let t=localStorage.timer-new Date;if(t>=0){let e,i,a;e=Math.floor(t/1e3),i=parseInt(e/60,10),a=parseInt(e%60,10),i=i<10?"0"+i:i,a=a<10?"0"+a:a,$("#timer").text(i+":"+a)}else clearInterval(e),location.href="/logout?url="+location.pathname+"&sess=0"}),100)}function validateFileType(e,t){if("common"===t)var i=["pdf","doc","docx","xls","xlsx","xlsb","ppt","pptx","eml","msg","rar"],a="PDF, Word, Excel, PowerPoint, WebMail, OutlookMail or RAR";if("pdf"===t)i=["pdf"],a="PDF only";return i.includes(e)?($("#fileErr").html(""),!0):($("#file").val(""),$("#fileErr").html("File Error: Please choose a valid file. ("+a+")"),!1)}function validateFileSize(e,t){if(e>1048576*t)return $("#file").val(""),void $("#fileErr").html("File Error: File size shouldn't exceed "+t+" MB.");$("#fileErr").html("")}function showAlertDanger(){$("#res0").fadeIn("slow"),$("#res0")[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}function showAlertSuccess(){$("#res1").fadeIn("slow"),$("#res1")[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}function redirect(){location.href="/?url="+location.pathname+"&sess=0"}function formatNumToINR(e){return e.toLocaleString("en-IN",{maximumFractionDigits:2,style:"currency",currency:"INR"})}function validateInteger(e,t){return new RegExp("^[0-9]{"+t+"}$").test(e)}function dmsminjs(){}$((function(){"use strict";const e=new Date,t=e.getFullYear();String(e.getMonth()+1).padStart(2,"0"),String(e.getDate()).padStart(2,"0");$("#form-signin").on("submit",(function(e){return e.preventDefault(),$.trim($("#email").val())&&$.trim($("#password").val())&&$.trim($("#totp").val())?validateInteger($("#totp").val(),"6")?void grecaptcha.ready((function(){grecaptcha.execute("6LcmZj4hAAAAAD_nfd1G2ElMlb7kTn6m-Zp1yS6N",{action:"sign_in_to_dms"}).then((function(e){let t,i,a,r;t=$("#email").val(),i=$("#password").val(),a=$("#totp").val(),r=$("#url").val(),attemptSignin(t,i,a,r,e)}))})):($("#msg0").html("<b>Error:</b> TOTP must contain 6 digits."),void showAlertDanger()):($("#msg0").html("<b>Error:</b> Invalid data was submitted in field(s)."),void showAlertDanger())})),$("#form-recovercredentials").on("submit",(function(e){return e.preventDefault(),$.trim($("#email-recovercredentials").val())&&$.trim($("#key").val())?validateInteger($("#key").val(),"5,10")?void grecaptcha.ready((function(){grecaptcha.execute("6LcmZj4hAAAAAD_nfd1G2ElMlb7kTn6m-Zp1yS6N",{action:"recover_credentials"}).then((function(e){let t,i;t=$("#email-recovercredentials").val(),i=$("#key").val(),attemptRecovercredentials(t,i,e)}))})):($("#msg0").html("<b>Error:</b> Key must contain minimum 5 and maximum 10 digits."),void showAlertDanger()):($("#msg0").html("<b>Error:</b> Invalid data was submitted in field(s)."),void showAlertDanger())})),$("#form-resetpass").on("submit",(function(e){return e.preventDefault(),$.trim($("#newPass").val())&&$.trim($("#cnfPass").val())?$("#newPass").val()!==$("#cnfPass").val()?($("#msg0").html("<b>Error:</b> New password & confirm new password do not match. Try again!"),void showAlertDanger()):void grecaptcha.ready((function(){grecaptcha.execute("6LcmZj4hAAAAAD_nfd1G2ElMlb7kTn6m-Zp1yS6N",{action:"reset_password"}).then((function(e){let t,i,a,r;t=$("#newPass").val(),i=$("#cnfPass").val(),a=$("#t").val(),r=$("#e").val(),attemptResetpassword(t,i,a,r,e)}))})):($("#msg0").html("<b>Error:</b> Invalid data was submitted in field(s)."),void showAlertDanger())})),$("#form-radio-mobile").on("submit",(function(e){return e.preventDefault(),$.trim($("#countryCode").val())&&$.trim($("#mobile").val())&&$.trim($("#curPassM").val())&&$.trim($("#totpM").val())?validateInteger($("#mobile").val(),"10")?validateInteger($("#totpM").val(),"6")?void $.ajax({method:"POST",url:"index",data:$(this).serialize(),timeout:14e3,beforeSend:function(){$("#submitM").attr("disabled",!0),$("#submitM").html('<i class="fa-solid fa-spinner fa-spin-pulse fa-xl fa-fw"></i>Submitting...')}}).done((function(e,t,i){if(i.getResponseHeader("content-security-policy"))return void redirect();setTimerVal();let a=JSON.parse(e);return 1===a.res?($("#form-radio-mobile").trigger("reset"),$("select").length&&$("#form-radio-mobile").find(".selectized").each((function(e,t){t.selectize&&t.selectize.clear()})),document.body.scrollTop=document.documentElement.scrollTop=0,void(location.href=a.msg)):0===a.res?($("#msg0").html(a.msg),void showAlertDanger()):void(2===a.res&&(localStorage.setItem("logout-event","logout"+Math.random()),location.href=a.msg))})).fail((function(e,t,i){$("#msg0").html("Error in processing request: "+i+"."),showAlertDanger()})).always((function(){$("#submitM").html("Submit"),$("#submitM").attr("disabled",!1)})):($("#msg0").html("<b>Error:</b> TOTP must contain 6 digits."),void showAlertDanger()):($("#msg0").html("<b>Error:</b> Mobile number must contain 10 digits."),void showAlertDanger()):($("#msg0").html("Ahem! Required fields can't be left empty."),void showAlertDanger())})),$("#form-radio-key").on("submit",(function(e){return e.preventDefault(),$.trim($("#key").val())&&$.trim($("#curPassK").val())&&$.trim($("#totpK").val())?validateInteger($("#key").val(),"5,10")?validateInteger($("#totpK").val(),"6")?void $.ajax({method:"POST",url:"index",data:$(this).serialize(),timeout:14e3,beforeSend:function(){$("#submitK").attr("disabled",!0),$("#submitK").html('<i class="fa-solid fa-spinner fa-spin-pulse fa-xl fa-fw"></i>Submitting...')}}).done((function(e,t,i){if(i.getResponseHeader("content-security-policy"))return void redirect();setTimerVal();let a=JSON.parse(e);return 1===a.res?($("#form-radio-key").trigger("reset"),document.body.scrollTop=document.documentElement.scrollTop=0,void(location.href=a.msg)):0===a.res?($("#msg0").html(a.msg),void showAlertDanger()):void(2===a.res&&(localStorage.setItem("logout-event","logout"+Math.random()),location.href=a.msg))})).fail((function(e,t,i){$("#msg0").html("Error in processing request: "+i+"."),showAlertDanger()})).always((function(){$("#submitK").html("Submit"),$("#submitK").attr("disabled",!1)})):($("#msg0").html("<b>Error:</b> TOTP must contain 6 digits."),void showAlertDanger()):($("#msg0").html("<b>Error:</b> Key must contain minimum 5 and maximum 10 digits."),void showAlertDanger()):($("#msg0").html("Ahem! Required fields can't be left empty."),void showAlertDanger())})),$("#form-radio-password").on("submit",(function(e){return e.preventDefault(),$.trim($("#newPass").val())&&$.trim($("#cnfPass").val())&&$.trim($("#curPassP").val())&&$.trim($("#totpP").val())?$("#newPass").val()!==$("#cnfPass").val()?($("#msg0").html("<b>Error:</b> New password & confirm new password do not match. Try again!"),void showAlertDanger()):$("#newPass").val()===$("#curPassP").val()?($("#msg0").html("<b>Error:</b> Current password and new password must not be same."),void showAlertDanger()):validateInteger($("#totpP").val(),"6")?void $.ajax({method:"POST",url:"index",data:$(this).serialize(),timeout:14e3,beforeSend:function(){$("#submitP").attr("disabled",!0),$("#submitP").html('<i class="fa-solid fa-spinner fa-spin-pulse fa-xl fa-fw"></i>Submitting...')}}).done((function(e,t,i){if(i.getResponseHeader("content-security-policy"))return void redirect();setTimerVal();let a=JSON.parse(e);return 1===a.res?($("#form-radio-password").trigger("reset"),localStorage.setItem("logout-event","logout"+Math.random()),void(location.href=a.msg)):0===a.res?($("#msg0").html(a.msg),void showAlertDanger()):void(2===a.res&&(localStorage.setItem("logout-event","logout"+Math.random()),location.href=a.msg))})).fail((function(e,t,i){$("#msg0").html("Error in processing request: "+i+"."),showAlertDanger()})).always((function(){$("#submitP").html("Submit"),$("#submitP").attr("disabled",!1)})):($("#msg0").html("<b>Error:</b> TOTP must contain 6 digits."),void showAlertDanger()):($("#msg0").html("Ahem! Required fields can't be left empty."),void showAlertDanger())})),$("#form-email").on("submit",(function(e){if(e.preventDefault(),!$.trim($("#subject").val())||!$.trim($("#message").val()))return $("#msg0").html("<b>Error:</b> Invalid data was submitted in field(s)."),void showAlertDanger();$.ajax({method:"POST",url:"index",data:$(this).serialize(),timeout:14e3,beforeSend:function(){$("#submit").attr("disabled",!0),$("#submit").html('<i class="fa-solid fa-spinner fa-spin-pulse fa-xl fa-fw"></i>Submitting...')}}).done((function(e,t,i){if(i.getResponseHeader("content-security-policy"))return void redirect();setTimerVal();let a=JSON.parse(e);if(1===a.res)return $("#msg1").html(a.msg),$("#form-email").trigger("reset"),$("#form-email").find("*").filter(":input:visible:first").focus(),void showAlertSuccess();0===a.res&&($("#msg0").html(a.msg),showAlertDanger())})).fail((function(e,t,i){$("#msg0").html("Error in processing request: "+i+"."),showAlertDanger()})).always((function(){$("#submit").html("Submit"),$("#submit").attr("disabled",!1)}))})),$("#form-upload").on("submit",(function(e){e.preventDefault(),$.ajax({method:"POST",url:"write",data:new FormData(this),timeout:84e4,contentType:!1,processData:!1,beforeSend:function(){$("#upload").attr("disabled",!0),$("#upload").html('<i class="fa-solid fa-spinner fa-spin-pulse fa-xl fa-fw"></i>Uploading...'),$("#file-progress-bar").width("0%"),$(".progress").fadeIn("slow")},xhr:function(){let e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){let t=Math.ceil(e.loaded/e.total*100);$("#file-progress-bar").width(t+"%"),$("#file-progress-bar").html(t+"%")}}),!1),e}}).done((function(e,t,i){if(i.getResponseHeader("content-security-policy"))return void redirect();setTimerVal();let a=JSON.parse(e);if(1===a.res)return $("#msg1").html(a.msg),$("#form-upload").trigger("reset"),$("select").length&&$("#form-upload").find(".selectized").each((function(e,t){t.selectize&&t.selectize.clear()})),showAlertSuccess(),void setTimeout((function(){$("#form-upload").find("*").filter(":input:visible:first").focus()}),1500);0===a.res&&($("#msg0").html(a.msg),showAlertDanger())})).fail((function(e,t,i){$("#msg0").html("Error in processing request: "+i+"."),showAlertDanger()})).always((function(){$(".progress").fadeOut("slow"),$("#upload").html("Upload"),$("#upload").attr("disabled",!1)}))})),$(".radio-departments").on("click",(function(){let e=$(this).val();$.ajax({method:"POST",url:"index",data:{department:e},timeout:14e3,beforeSend:function(){$(".alert, #tabledi-container").hide()}}).done((function(e,t,i){if(i.getResponseHeader("content-security-policy"))return void redirect();setTimerVal();let a=JSON.parse(e);if(1===a.res){$.fn.DataTable.isDataTable("#tabledi")&&$("#tabledi").DataTable().clear().destroy(),$("#tbody").find("tr").remove();for(let e in a.msg){let t=`<tr><td>${a.msg[e]}</td><td class="fitContent"><a href="${a.dep+"/"+e.concat("/read")}"><button type="button" class="btn btn-primary btn-sm">Read</button></a>&nbsp;/&nbsp;<a href="${a.dep+"/"+e.concat("/write")}"><button type="button" class="btn btn-primary btn-sm">Write</button></a></td></tr>`;$("#tbody").append(t)}return $("#tabledi-container").fadeIn("slow"),$("#tabledi").DataTable({ordering:!1}),$(".dataTables_length select").addClass("form-select form-select-sm dark"),$(".dataTables_filter input").addClass("form-control form-control-sm dark").focus(),void $(".dataTables_filter input")[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}0===a.res&&($("#msg0").html(a.msg),showAlertDanger())})).fail((function(e,t,i){$("#msg0").html("Error in processing request: "+i+"."),showAlertDanger()}))})),$('[data-selection-selectize="single"]').selectize({sortField:{field:"text"}}),$('[data-selection-selectize="singleCreate"]').selectize({sortField:{field:"text"},create:!0}),$('[data-selection-selectize="multiple"]').selectize({sortField:{field:"text"},plugins:["remove_button"]}),$('[data-selection-selectize="multipleMax2"]').selectize({sortField:{field:"text"},maxItems:2,plugins:["remove_button"]}),$('[data-selection-selectize="multipleCreate"]').selectize({sortField:{field:"text"},create:!0,plugins:["remove_button"]}),$('[data-selection-selectize="multipleMax2Create"]').selectize({sortField:{field:"text"},create:!0,maxItems:2,plugins:["remove_button"]}),$('[data-selection-datepicker="D_Today"]').datepicker({startView:2,format:"yyyy-mm-dd",startDate:t-21+"-01-01",endDate:Date.now(),autoHide:!0}),$('[data-selection-datepicker="D_N1y"]').datepicker({startView:2,format:"yyyy-mm-dd",startDate:t-21+"-01-01",endDate:t+1+"-12-31",autoHide:!0}),$('[data-selection-datepicker="D_Free"]').datepicker({startView:2,format:"yyyy-mm-dd",startDate:t-21+"-01-01",endDate:t+21+"-01-01",autoHide:!0}),$('[data-selection-datepicker="D_Tomorrow"]').datepicker({startView:2,format:"yyyy-mm-dd",startDate:Date.now()+864e5,endDate:t+21+"-01-01",autoHide:!0}),$('[data-selection-datepicker="YM_Today"]').datepicker({startView:2,format:"yyyy-mm",startDate:t-21+"-01-01",endDate:Date.now(),autoHide:!0}),$('[data-selection-datepicker="YM_N1y"]').datepicker({startView:2,format:"yyyy-mm",startDate:t-21+"-01-01",endDate:t+1+"-12-31",autoHide:!0}),$('[data-selection-datepicker="YM_Free"]').datepicker({startView:2,format:"yyyy-mm",startDate:t-21+"-01-01",endDate:t+21+"-01-01",autoHide:!0}),$('[data-selection-datepicker="YM_Tomorrow"]').datepicker({startView:2,format:"yyyy-mm",startDate:t+1+"-01-01",endDate:t+21+"-01-01",autoHide:!0}),$('[data-selection-datepicker="Y_Today"]').datepicker({startView:2,format:"yyyy",startDate:t-21+"-01-01",endDate:Date.now(),autoHide:!0}),$('[data-selection-datepicker="Y_N1y"]').datepicker({startView:2,format:"yyyy",startDate:t-21+"-01-01",endDate:t+1+"-12-31",autoHide:!0}),$('[data-selection-datepicker="Y_Free"]').datepicker({startView:2,format:"yyyy",startDate:t-21+"-01-01",endDate:t+21+"-01-01",autoHide:!0}),$('[data-selection-datepicker="Y_Tomorrow"]').datepicker({startView:2,format:"yyyy",startDate:t+1+"-01-01",endDate:t+21+"-01-01",autoHide:!0}),$('[data-selection-datepicker="FY_Today"]').datepicker({startView:2,startDate:t-21+"-01-01",endDate:Date.now(),format:"yyyy",autoHide:!0,pick:function(e){e.preventDefault();let t=e.date.getFullYear(),i=t+"-"+(t+1);$(this).val(i)}}),$('[data-selection-datepicker="FY_N1y"]').datepicker({startView:2,startDate:t-21+"-01-01",endDate:t+1+"-12-31",format:"yyyy",autoHide:!0,pick:function(e){e.preventDefault();let t=e.date.getFullYear(),i=t+"-"+(t+1);$(this).val(i)}}),$('[data-selection-datepicker="FY_Free"]').datepicker({startView:2,startDate:t-21+"-01-01",endDate:t+21+"-01-01",format:"yyyy",autoHide:!0,pick:function(e){e.preventDefault();let t=e.date.getFullYear(),i=t+"-"+(t+1);$(this).val(i)}}),$('[data-selection-datepicker="FY_Tomorrow"]').datepicker({startView:2,startDate:t+1+"-01-01",endDate:t+21+"-01-01",format:"yyyy",autoHide:!0,pick:function(e){e.preventDefault();let t=e.date.getFullYear(),i=t+"-"+(t+1);$(this).val(i)}}),$('[name="inlineRadioOptionsGrp2"]').on("click",(function(){$("#byFinYearNameBlock").hide();let e=$(this).val();"byFinYear"===e&&($("#"+e+"NameBlock").fadeIn("slow"),$("#"+e+"NameBlock").find("*").filter(":input:visible:first")[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout((function(){$("#"+e+"NameBlock").find("*").filter(":input:visible:first").focus()}),500))})),$('[name="inlineRadioOptionsGrp1"]').on("click",(function(){$("#byComNameBlock, #byDivNameBlock").hide(),$("#byComName, #byDivName").prop("required",!1);let e=$(this).val();$("#"+e+"NameBlock").fadeIn("slow"),$("#"+e+"Name").prop("required",!0),$("#"+e+"NameBlock").find("*").filter(":input:visible:first")[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout((function(){$("#"+e+"NameBlock").find("*").filter(":input:visible:first").focus()}),500)})),$("#viewInsuranceReportsBtn_7").on("click",(function(){$(".hidden, #tablei-container").hide(),$("#showInsuranceReportsBlock_7").fadeIn("slow")})),$('[data-dd-visibility="insType_6"]').on("change",(function(){$(".hidden").hide(),"Vehicle insurance"===$(this).val()&&$("#vehNumBlock").fadeIn("slow")})),$('[data-dd-visibility="retType_5"]').on("change",(function(){$(".hidden").hide(),"Monthly"===$(this).val()?$("#yearMonthBlock").fadeIn("slow"):"Quarterly"===$(this).val()&&$("#quarterBlock").fadeIn("slow")})),$('[data-dd-visibility="stock_ffr_4"]').on("change",(function(){$(".hidden").hide(),"Stock statement"===$(this).val()?$("#yearMonthBlock").fadeIn("slow"):"FFR 1"===$(this).val()?$("#quarterBlock").fadeIn("slow"):$("#halfYearBlock").fadeIn("slow")})),$('[data-dd-visibility="spark_reports_3"]').on("change",(function(){$(".hidden").hide(),"Daily"===$(this).val()?$("#dateBlock").fadeIn("slow"):$("#yearMonthBlock").fadeIn("slow")})),$('[data-dd-visibility="cashflows_2"]').on("change",(function(){$(".hidden").hide(),"Daily Cash Flow"===$(this).val()?$("#dateBlock").fadeIn("slow"):$("#yearMonthBlock").fadeIn("slow")})),$('[data-dd-visibility="progressReports_1"]').on("change",(function(){$(".hidden").hide(),"Daily Progress Report"===$(this).val()?$("#dateBlock").fadeIn("slow"):$("#yearMonthBlock").fadeIn("slow")})),$("#tablei thead tr:eq(1) th").each((function(){let e=$(this).text();$(this).html('<input type="search" class="column_search form-control form-control-sm dark" placeholder="Search '+e+'" />')}));let i=$("#tablei").on("xhr.dt",(function(e,t,i,a){a.getResponseHeader("content-security-policy")?redirect():"timeout"===a.statusText&&($("#msg0").html("Error in processing request: "+a.statusText+"."),showAlertDanger())})).DataTable({orderCellsTop:!0,processing:!0,serverSide:!0,ajax:{method:"POST",url:"read",data:function(e){e.csrfToken=$("#csrfToken").val()},timeout:14e3,beforeSend:function(){},dataSrc:function(e){return setTimerVal(),0===e.res?($("#msg0").html(e.msg),void showAlertDanger()):e.data}},deferRender:!0,order:[[0,"desc"]],search:{return:!0}});$("#tablei thead").on("keyup change clear",".column_search",(function(e){13===e.keyCode&&i.column($(this).parent().index()).search(this.value).draw()})),$("#tablei").on("click",(function(){$(".alert, .hidden").hide()})),$("#tablei tbody").on("click",".downloadButton",(function(){setTimerVal()})),$("#tablei tbody").on("click",".changeStatus",(function(){let e=$(this).val();$.ajax({method:"POST",url:"read",data:{changeStatus:e},timeout:14e3,beforeSend:function(){$(".changeStatus").attr("disabled",!0),$(".changeStatus").html('<i class="fa-solid fa-spinner fa-spin-pulse fa-xl fa-fw"></i>Working...')}}).done((function(e,t,i){if(i.getResponseHeader("content-security-policy"))return void redirect();setTimerVal();let a=JSON.parse(e);if(1===a.res){$("#changeStatusTable").find("tr").remove();for(let e in a.msg){let t=`<tr><th class="table-info fitContent" scope="row">${e}</th><td>${a.msg[e]}</td></tr>`;$("#changeStatusTable").append(t)}return $("#changeStatus").val(a.changeStatus),$("#tablei-container").hide(),$("#changeStatusBlock").fadeIn("slow"),void(document.body.scrollTop=document.documentElement.scrollTop=0)}0===a.res&&($("#msg0").html(a.msg),showAlertDanger())})).fail((function(e,t,i){$("#msg0").html("Error in processing change status request: "+i+"."),showAlertDanger()})).always((function(){$(".changeStatus").html("Update"),$(".changeStatus").attr("disabled",!1)}))})),$("#form-changeStatus").on("submit",(function(e){e.preventDefault(),$.ajax({method:"POST",url:"read",data:$(this).serialize(),timeout:14e3,beforeSend:function(){$("#submit").attr("disabled",!0),$("#submit").html('<i class="fa-solid fa-spinner fa-spin-pulse fa-xl fa-fw"></i>Submitting...')}}).done((function(e,t,i){if(i.getResponseHeader("content-security-policy"))return void redirect();setTimerVal();let a=JSON.parse(e);if(2===a.res)return document.body.scrollTop=document.documentElement.scrollTop=0,void(location.href=a.msg);0===a.res&&($("#msg0").html(a.msg),showAlertDanger())})).fail((function(e,t,i){$("#msg0").html("Error in processing change status consent request: "+i+"."),showAlertDanger()})).always((function(){$("#submit").html("Submit"),$("#submit").attr("disabled",!1)}))})),$("#form-viewInsuranceReports_7").on("submit",(function(e){e.preventDefault(),$.ajax({method:"POST",url:"read",data:$(this).serialize(),timeout:14e3,beforeSend:function(){$("#getReportTableBlock").hide(),$("#submit1").attr("disabled",!0),$("#submit1").html('<i class="fa-solid fa-spinner fa-spin-pulse fa-xl fa-fw"></i>Working...')}}).done((function(e,t,i){if(i.getResponseHeader("content-security-policy"))return void redirect();setTimerVal();let a=JSON.parse(e);if(1===a.res){$("#getReportTable").find("tr").remove();let e=0,t=0,i=0;$.each(a.msg,(function(a,r){let n=`<tr><td>${r.insType}</td><td>${r.count}</td><td>${formatNumToINR(parseFloat(r.sumPreAmt))}</td><td>${formatNumToINR(parseFloat(r.sumSumIns))}</td></tr>`;$("#getReportTable").append(n),e+=parseInt(r.count),t+=parseFloat(r.sumPreAmt),i+=parseFloat(r.sumSumIns)}));let r=`<tr><td><h4 class="text-danger">Totals</h4></td><td>${e}</td><td>${formatNumToINR(t)}</td><td>${formatNumToINR(i)}</td></tr>`;return $("#getReportTable").append(r),$("#byCom").is(":checked")&&$("#resultByInlineRadioOptionsGrp1").html("By company: "+$("#byComName").text()),$("#byDiv").is(":checked")&&$("#resultByInlineRadioOptionsGrp1").html("By division: "+$("#byDivName").text()),$("#byValid").is(":checked")&&$("#resultByInlineRadioOptionsGrp2").html("Results: By valid insurances"),$("#byExpired").is(":checked")&&$("#resultByInlineRadioOptionsGrp2").html("Results: By expired insurances"),$("#byFinYear").is(":checked")&&$("#resultByInlineRadioOptionsGrp2").html("Results By Financial Year: "+$("#byFinYearName").val()),$("#form-viewInsuranceReports_7").trigger("reset"),$("select").length&&$("#form-viewInsuranceReports_7").find(".selectized").each((function(e,t){t.selectize&&t.selectize.clear()})),$("#byComNameBlock, #byDivNameBlock, #byFinYearNameBlock").hide(),$("#getReportTableBlock").fadeIn("slow"),void $("#getReportTable")[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}0===a.res&&($("#msg0").html(a.msg),showAlertDanger())})).fail((function(e,t,i){$("#msg0").html("Error in processing get report request: "+i+"."),showAlertDanger()})).always((function(){$("#submit1").html("Submit"),$("#submit1").attr("disabled",!1)}))})),$("#cancelButton, #cancelButton1").on("click",(function(){$(".hidden").hide(),$("#tablei-container").fadeIn("slow"),document.body.scrollTop=document.documentElement.scrollTop=0})),$("#tablec").on("click","button",(function(){$(this).blur(),$(".alert").hide(),$(this).hasClass("show-alert")&&($("#msg0").html("Company / project not yet on DMS as requirement for it is not yet given!"),showAlertDanger())})),$("#tablec").DataTable({ordering:!1}),$(".dataTables_length select").addClass("form-select form-select-sm dark"),$(".dataTables_filter input").addClass("form-control form-control-sm dark").focus(),$.fn.dataTable.ext.errMode="none",$.fn.dataTable.ext.errMode=()=>{$("#msg0").html("Error in processing request: Table error."),showAlertDanger()},$("#toggle-form-containers").on("click",(function(e){e.preventDefault(),'<i class="fa-solid fa-unlock fa-fw"></i>Recover credentials?'===$(this).html()?$(this).html('<i class="fa-solid fa-right-to-bracket fa-fw"></i>Sign in to DMS?'):$(this).html('<i class="fa-solid fa-unlock fa-fw"></i>Recover credentials?'),$("#form-signin-container, #form-recovercredentials-container").toggle("slow")})),$(".capitalizeInput").on("input",(function(e){e.target.value=e.target.value.toLocaleUpperCase()})),$(".btn-close").on("click",(function(){$(this).closest(".alert").fadeOut("slow")})),$(".hide-alert").on("click",(function(){$(".alert").hide()})),$(".blur").on("click",(function(){$(this).blur()})),$("#newPass, #cnfPass").on("paste",(function(e){e.preventDefault()})),$('[type="radio"]').prop("checked",!1),$(".radio-teamprogress").on("click",(function(){$(".hidden").hide();let e=$(this).val();$("#show"+e).fadeIn("slow")})),$(".radio-userprofile").on("click",(function(){$(".alert").hide(),$(".hidden").hide();let e=$(this).val();$("#show-"+e).fadeIn("slow"),$("#form-"+e).find("*").filter(":input:visible:first")[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout((function(){$("#form-"+e).find("*").filter(":input:visible:first").focus()}),500)})),$("#logout").on("click",(function(){localStorage.setItem("logout-event","logout"+Math.random())})),$("#timer-reset").on("click",(function(e){e.preventDefault(),setTimer(),$("#timer-reset").css("pointer-events","none"),setTimeout((function(){$("#timer-reset").css("pointer-events","auto")}),6e4)})),$("#timer-reset").length&&setTimerVal(),$("#form-email, #form-upload").find("*").filter(":input:visible:first").focus(),$("#file").on("change",(function(){if(!$("#file")[0].files.length)return;let e=this.files[0],t=e.name.split(".").pop().toLowerCase(),i=e.size,a=this.getAttribute("data-valid-file-type"),r=parseInt(this.getAttribute("data-valid-file-size"));validateFileType(t,a)&&validateFileSize(i,r)}))})),window.addEventListener("storage",(function(e){"logout-event"===e.key&&(location.href="/logout")}));let tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),tooltipList=tooltipTriggerList.map((function(e){return new bootstrap.Tooltip(e)}));